<div layout-gt-md="row">
  <div flex>
    <md-card>
      <md-card-title>
        <md-card-title-text>
          <h3 class="md-headline">Reconstruction</h3>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <p ng-if="vm.time">Time: {{ vm.time | number : 2 }}</p>
        <p>Scramble: {{ vm.scramble }}</p>
        <md-divider></md-divider>
        <p class="step" ng-repeat="step in vm.steps">
          <span class="moves">{{ step.moves.join(' ') }}</span>
          <span class="name"> // {{ step.name }}</span>
        </p>
        <md-divider></md-divider>
        <div class="actions">
          <md-button class="md-icon-button" ng-href="{{ vm.animationUrl }}" target="_blank">
            <md-tooltip md-direction="top">See animation</md-tooltip>
            <md-icon>movie</md-icon>
          </md-button>
          <md-button class="md-icon-button" ng-click="vm.copyUrl()">
            <md-tooltip md-direction="top">Copy URL</md-tooltip>
            <md-icon>link</md-icon>
          </md-button>
          <md-button class="md-icon-button" ng-click="vm.copySolution()">
            <md-tooltip md-direction="top">Copy solution</md-tooltip>
            <md-icon>content_copy</md-icon>
          </md-button>
          <md-button class="md-icon-button" ui-sref="reconstructions.new(vm.$stateParams)">
            <md-tooltip md-direction="top">Edit</md-tooltip>
            <md-icon>mode_edit</md-icon>
          </md-button>
        </div>
      </md-card-content>
    </md-card>
  </div>
  <div flex>
    <md-card>
      <md-card-title>
        <md-card-title-text>
          <h3 class="md-headline">Statistics</h3>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <md-tabs md-dynamic-height>
          <md-tab label="Move count">
            <md-table-container>
              <table md-table>
                <thead md-head>
                  <tr md-row>
                    <th md-column>Step</th>
                    <th md-column ng-repeat="metric in vm.metrics">{{ metric | uppercase }}</th>
                  </tr>
                </thead>
                <tbody md-body>
                  <tr md-row ng-repeat="step in vm.steps" ng-hide="step.name === 'inspection'">
                    <td md-cell>{{ step.name }}</td>
                    <td md-cell ng-repeat="metric in vm.metrics">{{ step.moveCount[metric] }}</td>
                  </tr>
                  <tr md-row class="move-count-summary">
                    <td md-cell>Total</td>
                    <td md-cell ng-repeat="metric in vm.metrics">{{ vm.totalMoveCount[metric] }}</td>
                  </tr>
                </body>
              </table>
            </md-table-container>
          </md-tab>
          <md-tab label="TPS" ng-if="vm.time">
            <md-table-container>
              <table md-table>
                <thead md-head>
                  <tr md-row>
                    <th md-column ng-repeat="metric in vm.metrics">
                      {{ metric.replace('tm', 'tps') | uppercase }}
                      <md-tooltip md-direction="left">TPS calculated using {{ metric | uppercase }}</md-tooltip>
                    </th>
                  </tr>
                </thead>
                <tbody md-body>
                  <tr md-row>
                    <td md-cell ng-repeat="metric in vm.metrics">{{ vm.calculateTps(vm.totalMoveCount[metric], vm.time) }}</td>
                  </tr>
                </body>
              </table>
            </md-table-container>
          </md-tab>
        </md-tabs>
      </md-card-content>
    </md-card>
  </div>
</div>
